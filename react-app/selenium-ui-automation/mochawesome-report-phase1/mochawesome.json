{
  "stats": {
    "suites": 6,
    "tests": 16,
    "passes": 16,
    "pending": 0,
    "failures": 0,
    "start": "2025-12-15T12:37:20.194Z",
    "end": "2025-12-15T12:38:55.358Z",
    "duration": 95164,
    "testsRegistered": 16,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "7f2b45eb-6dc2-42ec-b9b8-e131c89123d5",
      "title": "",
      "fullFile": "",
      "file": "",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "8b0ec8d4-e9e3-4440-b5b9-79a394ce8560",
          "title": "Dashboard Page UI Test (Admin User)",
          "fullFile": "C:\\Users\\TharakaDilshan\\Downloads\\staff-management-system\\react-app\\tests\\phase1\\dashboard.test.js",
          "file": "\\tests\\phase1\\dashboard.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Dashboard Page UI Test (Admin User)\"",
              "fullTitle": "Dashboard Page UI Test (Admin User) \"before all\" hook in \"Dashboard Page UI Test (Admin User)\"",
              "timedOut": false,
              "duration": 7212,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "driver = await new Builder().forBrowser(\"chrome\").build();\n// âœ… Inject the token directly into localStorage before loading dashboard\nawait driver.get(BASE_URL);\nawait driver.executeScript(`window.localStorage.setItem('token', '${ACCESS_TOKEN}');`);\n// âœ… Now go to the dashboard\nawait driver.get(DASHBOARD_URL);",
              "err": {},
              "uuid": "fc2b375b-5ab4-45b7-ad12-e918047e727f",
              "parentUUID": "8b0ec8d4-e9e3-4440-b5b9-79a394ce8560",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"Dashboard Page UI Test (Admin User)\"",
              "fullTitle": "Dashboard Page UI Test (Admin User) \"after all\" hook in \"Dashboard Page UI Test (Admin User)\"",
              "timedOut": false,
              "duration": 1085,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) await driver.quit();",
              "err": {},
              "uuid": "96669b6a-eedc-4cf2-89fc-2003b1e00332",
              "parentUUID": "8b0ec8d4-e9e3-4440-b5b9-79a394ce8560",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "should display the Admin Portal title",
              "fullTitle": "Dashboard Page UI Test (Admin User) should display the Admin Portal title",
              "timedOut": false,
              "duration": 455,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const titleElement = await driver.wait(\n  until.elementLocated(By.id(\"dashboard-title\")),\n  20000\n);\nconst text = await titleElement.getText();\nassert.strictEqual(text.trim(), \"Admin Portal\");",
              "err": {},
              "uuid": "4e3db5a1-0ae9-4580-8dae-30f3ccfe4aea",
              "parentUUID": "8b0ec8d4-e9e3-4440-b5b9-79a394ce8560",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should display sidebar navigation buttons",
              "fullTitle": "Dashboard Page UI Test (Admin User) should display sidebar navigation buttons",
              "timedOut": false,
              "duration": 235,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const navProfile = await driver.findElement(By.id(\"nav-profile\"));\nconst navUsers = await driver.findElement(By.id(\"nav-users\"));\nconst navRoleAssign = await driver.findElement(By.id(\"nav-roleAssign\"));\nconst navHealth = await driver.findElement(By.id(\"nav-health\"));\nassert.ok(await navProfile.isDisplayed(), \"Profile button missing\");\nassert.ok(await navUsers.isDisplayed(), \"Users button missing\");\nassert.ok(await navRoleAssign.isDisplayed(), \"Role Assign button missing\");\nassert.ok(await navHealth.isDisplayed(), \"Health button missing\");",
              "err": {},
              "uuid": "0dec7677-ede4-432c-8720-b73b2775541f",
              "parentUUID": "8b0ec8d4-e9e3-4440-b5b9-79a394ce8560",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should navigate between sections (Profile â†’ Users â†’ RoleAssign â†’ Health)",
              "fullTitle": "Dashboard Page UI Test (Admin User) should navigate between sections (Profile â†’ Users â†’ RoleAssign â†’ Health)",
              "timedOut": false,
              "duration": 5376,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const buttons = [\"nav-profile\", \"nav-users\", \"nav-roleAssign\", \"nav-health\"];\nfor (const id of buttons) {\n  const button = await driver.findElement(By.id(id));\n  await button.click();\n  await driver.sleep(1000); // small wait for re-render\n  assert.ok(await button.isDisplayed(), `Failed to click ${id}`);\n}",
              "err": {},
              "uuid": "d1a2431f-a3b7-46fd-b22a-e5a927dd48eb",
              "parentUUID": "8b0ec8d4-e9e3-4440-b5b9-79a394ce8560",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "4e3db5a1-0ae9-4580-8dae-30f3ccfe4aea",
            "0dec7677-ede4-432c-8720-b73b2775541f",
            "d1a2431f-a3b7-46fd-b22a-e5a927dd48eb"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 6066,
          "root": false,
          "rootEmpty": false,
          "_timeout": 60000
        },
        {
          "uuid": "c4b366a3-2d34-4c40-8a96-62083f368f7e",
          "title": "Health Check Page UI Test (Admin User)",
          "fullFile": "C:\\Users\\TharakaDilshan\\Downloads\\staff-management-system\\react-app\\tests\\phase1\\healthcheck.test.js",
          "file": "\\tests\\phase1\\healthcheck.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Health Check Page UI Test (Admin User)\"",
              "fullTitle": "Health Check Page UI Test (Admin User) \"before all\" hook in \"Health Check Page UI Test (Admin User)\"",
              "timedOut": false,
              "duration": 8043,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const options = new chrome.Options();\noptions.addArguments(\"--start-maximized\");\ndriver = await new Builder()\n  .forBrowser(\"chrome\")\n  .setChromeOptions(options)\n  .build();\n// STEP 1 â€” Open dashboard and inject admin token manually\nawait driver.get(DASHBOARD_URL);\nawait driver.executeScript(\n  `window.localStorage.setItem('token', '${ACCESS_TOKEN}');`\n);\nawait driver.navigate().refresh();\n// STEP 2 â€” Wait until admin portal is visible\nawait driver.wait(until.elementLocated(By.id(\"dashboard-side-panel\")), 30000);\nconst title = await driver.findElement(By.id(\"dashboard-title\")).getText();\nassert.ok(title.includes(\"Admin Portal\"), \"Dashboard title mismatch\");\nconsole.log(\"âœ… Dashboard loaded and authorized as Admin\");",
              "err": {},
              "uuid": "32e8196b-2652-4db1-9021-341e8bd1a995",
              "parentUUID": "c4b366a3-2d34-4c40-8a96-62083f368f7e",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"Health Check Page UI Test (Admin User)\"",
              "fullTitle": "Health Check Page UI Test (Admin User) \"after all\" hook in \"Health Check Page UI Test (Admin User)\"",
              "timedOut": false,
              "duration": 1513,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) {\n  console.log(\"ðŸ§¹ Closing browser...\");\n  await driver.quit();\n}",
              "err": {},
              "uuid": "39ed2310-69f6-40ef-8b7e-fc76229aeb72",
              "parentUUID": "c4b366a3-2d34-4c40-8a96-62083f368f7e",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "should navigate to Health Check section",
              "fullTitle": "Health Check Page UI Test (Admin User) should navigate to Health Check section",
              "timedOut": false,
              "duration": 1770,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const healthButton = await driver.wait(\n  until.elementLocated(By.id(\"nav-health\")),\n  20000,\n  \"Health navigation button not found\"\n);\nawait healthButton.click();\nawait driver.wait(until.elementLocated(By.id(\"healthcheck-container\")), 20000);\nconst header = await driver.findElement(By.id(\"healthcheck-title\")).getText();\nassert.ok(header.includes(\"Systems Health\"), \"Header text mismatch\");\nconsole.log(\"âœ… Navigated to Health Check section\");",
              "err": {},
              "uuid": "7c44334b-67a3-4b47-974e-ef7bb6b8469e",
              "parentUUID": "c4b366a3-2d34-4c40-8a96-62083f368f7e",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should display system health alerts correctly",
              "fullTitle": "Health Check Page UI Test (Admin User) should display system health alerts correctly",
              "timedOut": false,
              "duration": 449,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Function to wait for either success or error alert for a system\nasync function checkSystemHealth(systemName) {\n  const successAlertXpath = `//h6[contains(text(), '${systemName}')]/following-sibling::div[contains(@class,'MuiAlert-standardSuccess')]`;\n  const errorAlertXpath = `//h6[contains(text(), '${systemName}')]/following-sibling::div[contains(@class,'MuiAlert-standardError')]`;\n  try {\n    const successAlert = await driver.wait(\n      until.elementLocated(By.xpath(successAlertXpath)),\n      20000\n    );\n    const text = await successAlert.getText();\n    console.log(`âœ… ${systemName} healthy: \"${text}\"`);\n  } catch {\n    const errorAlert = await driver.wait(\n      until.elementLocated(By.xpath(errorAlertXpath)),\n      5000\n    );\n    const text = await errorAlert.getText();\n    console.log(`âš ï¸ ${systemName} unhealthy: \"${text}\"`);\n    assert.ok(\n      text.length > 0,\n      `${systemName} health check failed but no alert message found`\n    );\n  }\n}\nawait checkSystemHealth(\"Authentication System\");\n// await checkSystemHealth(\"AWS Lambda System\");\n// await checkSystemHealth(\"ASP.NET Backend System\");\n// await checkSystemHealth(\"Go Backend System\");",
              "err": {},
              "uuid": "efa68071-5781-4789-9fd7-5689701abd78",
              "parentUUID": "c4b366a3-2d34-4c40-8a96-62083f368f7e",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "7c44334b-67a3-4b47-974e-ef7bb6b8469e",
            "efa68071-5781-4789-9fd7-5689701abd78"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 2219,
          "root": false,
          "rootEmpty": false,
          "_timeout": 120000
        },
        {
          "uuid": "a74ae25a-3093-459e-8b52-f4692e6737e3",
          "title": "Login & Logout Flow Tests",
          "fullFile": "C:\\Users\\TharakaDilshan\\Downloads\\staff-management-system\\react-app\\tests\\phase1\\loginLogout.test.js",
          "file": "\\tests\\phase1\\loginLogout.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Login & Logout Flow Tests\"",
              "fullTitle": "Login & Logout Flow Tests \"before all\" hook in \"Login & Logout Flow Tests\"",
              "timedOut": false,
              "duration": 3764,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "driver = await new Builder().forBrowser(\"chrome\").build();",
              "err": {},
              "uuid": "c90067a8-8c3d-4cea-b72a-3ba018d7e552",
              "parentUUID": "a74ae25a-3093-459e-8b52-f4692e6737e3",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"Login & Logout Flow Tests\"",
              "fullTitle": "Login & Logout Flow Tests \"after all\" hook in \"Login & Logout Flow Tests\"",
              "timedOut": false,
              "duration": 740,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) {\n  await driver.quit();\n}",
              "err": {},
              "uuid": "245d43ff-5094-46a8-aca6-234abd88b63c",
              "parentUUID": "a74ae25a-3093-459e-8b52-f4692e6737e3",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "should login and redirect to the dashboard",
              "fullTitle": "Login & Logout Flow Tests should login and redirect to the dashboard",
              "timedOut": false,
              "duration": 25854,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// 1. Go to login page\nawait driver.get(BASE_URL);\n// 2. Click \"Sign in with Cognito\"\nconst loginButton = await driver.wait(\n  until.elementLocated(By.css(\"button\")),\n  10000\n);\nawait loginButton.click();\n// 3. Wait for Cognito redirect\nawait driver.wait(until.urlContains(\"cognito\"), 15000);\n/**\n * Enable this if you automate Cognito login\n */\n// const emailField = await driver.wait(\n//   until.elementLocated(By.id(\"signInFormUsername\")),\n//   10000\n// );\n// await emailField.sendKeys(ADMIN_EMAIL);\n// const passwordField = await driver.findElement(By.id(\"signInFormPassword\"));\n// await passwordField.sendKeys(ADMIN_PASSWORD);\n// const signInBtn = await driver.findElement(By.name(\"signInSubmitButton\"));\n// await signInBtn.click();\n// 4. Assert dashboard loaded\nconst dashboardTitle = await driver.wait(\n  until.elementLocated(By.id(\"dashboard-title\")),\n  30000\n);\nconst titleText = await dashboardTitle.getText();\nassert.strictEqual(titleText, \"Admin Portal\");",
              "err": {},
              "uuid": "e7684eaa-7600-42a0-b157-40bc40dce263",
              "parentUUID": "a74ae25a-3093-459e-8b52-f4692e6737e3",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should logout from the dashboard and redirect to login",
              "fullTitle": "Login & Logout Flow Tests should logout from the dashboard and redirect to login",
              "timedOut": false,
              "duration": 1532,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// 1. Ensure side panel exists\nconst sidePanel = await driver.wait(\n  until.elementLocated(By.id(\"dashboard-side-panel\")),\n  10000\n);\n// 2. Scroll to bottom (logout button is at bottom)\nawait driver.executeScript(\n  \"arguments[0].scrollTop = arguments[0].scrollHeight\",\n  sidePanel\n);\n// 3. Click Logout button\nconst logoutButton = await driver.wait(\n  until.elementLocated(By.id(\"logout-button\")),\n  10000\n);\nawait logoutButton.click();\n// 4. Wait for logout confirmation dialog\nawait driver.wait(\n  until.elementLocated(By.css('[data-testid=\"logout-confirm-dialog\"]')),\n  10000\n);\n// 5. Confirm dialog title\nconst dialogTitle = await driver.findElement(\n  By.css('[data-testid=\"logout-dialog-title\"]')\n);\nassert.strictEqual(await dialogTitle.getText(), \"Confirm Logout\");\n// 6. Confirm logout\nconst confirmLogoutBtn = await driver.findElement(\n  By.css('[data-testid=\"logout-confirm-button\"]')\n);\nawait confirmLogoutBtn.click();\n// 7. Assert redirected to login page\nconst signInButtonAfterLogout = await driver.wait(\n  until.elementLocated(By.css(\"button\")),\n  20000\n);\nawait driver.wait(\n  until.elementIsVisible(signInButtonAfterLogout),\n  10000\n);\nassert.strictEqual(\n  await signInButtonAfterLogout.isDisplayed(),\n  true,\n  \"Sign in with Cognito button not visible after logout\"\n);",
              "err": {},
              "uuid": "6c50314f-0601-445e-85e3-da8c34a10602",
              "parentUUID": "a74ae25a-3093-459e-8b52-f4692e6737e3",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "e7684eaa-7600-42a0-b157-40bc40dce263",
            "6c50314f-0601-445e-85e3-da8c34a10602"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 27386,
          "root": false,
          "rootEmpty": false,
          "_timeout": 120000
        },
        {
          "uuid": "4bd3b96b-8402-4338-af4a-26cbf66f1bb6",
          "title": "Admin Profile Section UI Test",
          "fullFile": "C:\\Users\\TharakaDilshan\\Downloads\\staff-management-system\\react-app\\tests\\phase1\\profilesection.test.js",
          "file": "\\tests\\phase1\\profilesection.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Admin Profile Section UI Test\"",
              "fullTitle": "Admin Profile Section UI Test \"before all\" hook in \"Admin Profile Section UI Test\"",
              "timedOut": false,
              "duration": 7543,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const options = new chrome.Options();\noptions.addArguments(\"--start-maximized\");\ndriver = await new Builder()\n  .forBrowser(\"chrome\")\n  .setChromeOptions(options)\n  .build();\nconsole.log(\"ðŸš€ Opening dashboard...\");\nawait driver.get(DASHBOARD_URL);\n// Inject valid Admin token manually\nawait driver.executeScript(\n  `window.localStorage.setItem('token', '${ACCESS_TOKEN}');`\n);\nawait driver.navigate().refresh();\n// Wait until dashboard sidebar appears\nawait driver.wait(until.elementLocated(By.id(\"dashboard-side-panel\")), 30000);\nconst title = await driver.findElement(By.id(\"dashboard-title\")).getText();\nassert.ok(title.includes(\"Admin Portal\"), \"Admin Portal title missing\");\nconsole.log(\"âœ… Dashboard loaded successfully as Admin\");",
              "err": {},
              "uuid": "6f9ecbb8-93fd-427c-b6b7-b8c4583c7b39",
              "parentUUID": "4bd3b96b-8402-4338-af4a-26cbf66f1bb6",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"Admin Profile Section UI Test\"",
              "fullTitle": "Admin Profile Section UI Test \"after all\" hook in \"Admin Profile Section UI Test\"",
              "timedOut": false,
              "duration": 1297,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) {\n  console.log(\"ðŸ§¹ Closing browser...\");\n  await driver.quit();\n}",
              "err": {},
              "uuid": "0f311843-166f-4e8c-8f6a-8135ea089685",
              "parentUUID": "4bd3b96b-8402-4338-af4a-26cbf66f1bb6",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "should display Profile section by default",
              "fullTitle": "Admin Profile Section UI Test should display Profile section by default",
              "timedOut": false,
              "duration": 387,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Default selected page = Profile\nawait driver.wait(until.elementLocated(By.id(\"nav-profile\")), 20000);\n\n// Wait for profile title\nconst profileTitle = await driver.wait(\n  until.elementLocated(By.xpath(\"//h5[text()='My Profile']\")),\n  10000,\n  \"Profile title not visible\"\n);\nassert.ok(await profileTitle.isDisplayed(), \"Profile title not visible\");\nconst welcomeText = await driver.findElement(By.xpath(\"//p[contains(text(), 'Welcome,')]\")).getText();\nassert.ok(welcomeText.includes(\"Welcome\"), \"Welcome message not found\");\nconst roleText = await driver.findElement(By.xpath(\"//p[contains(text(), 'Role:')]\")).getText();\nassert.ok(roleText.includes(\"Admin\"), \"Role should be Admin\");\nconsole.log(\"âœ… Profile section loaded correctly\");",
              "err": {},
              "uuid": "243fded0-8c7a-4b7c-a2b3-ffcdb951a274",
              "parentUUID": "4bd3b96b-8402-4338-af4a-26cbf66f1bb6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should enter edit mode when clicking 'Edit Display Name'",
              "fullTitle": "Admin Profile Section UI Test should enter edit mode when clicking 'Edit Display Name'",
              "timedOut": false,
              "duration": 1099,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const editButton = await driver.findElement(By.id(\"edit-displayName-button\"));\nawait editButton.click();\nconst inputField = await driver.wait(\n  until.elementLocated(By.id(\"edit-displayName\")),\n  10000,\n  \"Edit input field not visible\"\n);\nassert.ok(await inputField.isDisplayed(), \"Edit input not displayed\");\nconsole.log(\"âœ… Entered edit mode successfully\");",
              "err": {},
              "uuid": "d8c436e6-348c-4419-a129-727e25139120",
              "parentUUID": "4bd3b96b-8402-4338-af4a-26cbf66f1bb6",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should update display name successfully",
              "fullTitle": "Admin Profile Section UI Test should update display name successfully",
              "timedOut": false,
              "duration": 2248,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const input = await driver.findElement(By.id(\"edit-displayName\"));\nawait input.sendKeys(Key.CONTROL, \"a\"); // Select all\nawait input.sendKeys(Key.BACK_SPACE); // Clear\nawait input.sendKeys(\"Updated Admin Name\");\nconst saveBtn = await driver.findElement(By.id(\"save-displayName\"));\nawait saveBtn.click();\n// Wait for snackbar message\nawait driver.wait(\n  until.elementLocated(By.xpath(\"//div[contains(@class,'MuiSnackbar-root')]//div[text()='Display name updated successfully!']\")),\n  10000\n);\n// Wait for React to re-render\nawait driver.wait(\n  async () => {\n    const text = await driver\n      .findElement(By.xpath(\"//p[contains(text(), 'Welcome,')]\"))\n      .getText();\n    return text.includes(\"Updated Admin Name\");\n  },\n  20000,\n  \"Updated display name not visible after saving\"\n);\nconst updatedText = await driver\n  .findElement(By.xpath(\"//p[contains(text(), 'Welcome,')]\"))\n  .getText();\nassert.ok(\n  updatedText.includes(\"Updated Admin Name\"),\n  `Expected updated name in UI, got: ${updatedText}`\n);\nconsole.log(\"âœ… Display name updated and verified successfully\");",
              "err": {},
              "uuid": "2eb44b11-d8b1-4b4a-9333-9981c8c4b14d",
              "parentUUID": "4bd3b96b-8402-4338-af4a-26cbf66f1bb6",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "243fded0-8c7a-4b7c-a2b3-ffcdb951a274",
            "d8c436e6-348c-4419-a129-727e25139120",
            "2eb44b11-d8b1-4b4a-9333-9981c8c4b14d"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 3734,
          "root": false,
          "rootEmpty": false,
          "_timeout": 90000
        },
        {
          "uuid": "9619cdf7-f8cc-4499-b7d8-01eba13fc179",
          "title": "Role Assign Section UI Test (Admin User)",
          "fullFile": "C:\\Users\\TharakaDilshan\\Downloads\\staff-management-system\\react-app\\tests\\phase1\\roleassign.test.js",
          "file": "\\tests\\phase1\\roleassign.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Role Assign Section UI Test (Admin User)\"",
              "fullTitle": "Role Assign Section UI Test (Admin User) \"before all\" hook in \"Role Assign Section UI Test (Admin User)\"",
              "timedOut": false,
              "duration": 9174,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "driver = await new Builder().forBrowser(\"chrome\").build();\n// Inject token\nawait driver.get(BASE_URL);\nawait driver.executeScript(`window.localStorage.setItem('token', '${ACCESS_TOKEN}');`);\n// Go to dashboard\nawait driver.get(DASHBOARD_URL);\n// Wait for dashboard to load\nawait driver.wait(until.elementLocated(By.id(\"dashboard-title\")), 20000);",
              "err": {},
              "uuid": "fcce9e86-e84f-4009-a42b-e907bdceb008",
              "parentUUID": "9619cdf7-f8cc-4499-b7d8-01eba13fc179",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"Role Assign Section UI Test (Admin User)\"",
              "fullTitle": "Role Assign Section UI Test (Admin User) \"after all\" hook in \"Role Assign Section UI Test (Admin User)\"",
              "timedOut": false,
              "duration": 1548,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) await driver.quit();",
              "err": {},
              "uuid": "6030be50-f666-4cd7-bcd4-b466e7654baa",
              "parentUUID": "9619cdf7-f8cc-4499-b7d8-01eba13fc179",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "should navigate to Role Assign section",
              "fullTitle": "Role Assign Section UI Test (Admin User) should navigate to Role Assign section",
              "timedOut": false,
              "duration": 1307,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const navRoleAssign = await driver.wait(\n  until.elementLocated(By.id(\"nav-roleAssign\")),\n  20000\n);\nawait navRoleAssign.click();\n// Wait for role assign table\nawait driver.wait(until.elementLocated(By.xpath(\"//table\")), 20000);\nconst header = await driver.findElement(By.xpath(\"//h6[contains(text(),'Assign Roles')]\"));\nconst text = await header.getText();\nassert.strictEqual(text.trim(), \"Assign Roles\");",
              "err": {},
              "uuid": "52f21110-408d-4048-9018-305927978f21",
              "parentUUID": "9619cdf7-f8cc-4499-b7d8-01eba13fc179",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should list users with dropdown and save buttons",
              "fullTitle": "Role Assign Section UI Test (Admin User) should list users with dropdown and save buttons",
              "timedOut": false,
              "duration": 301,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Ensure at least one user row exists\nconst userRows = await driver.findElements(By.xpath(\"//table/tbody/tr\"));\nassert.ok(userRows.length > 0, \"No users found in Role Assign section\");\n// Check dropdown and save icon for the first non-admin user\nlet targetRow;\nfor (let i = 1; i <= userRows.length; i++) {\n  const emailCell = await driver.findElement(By.xpath(`//table/tbody/tr[${i}]/td[1]`));\n  const email = await emailCell.getText();\n  if (email.trim().toLowerCase() !== \"testuser@example.com\") {\n    targetRow = i;\n    break;\n  }\n}\nassert.ok(targetRow, \"No non-admin user found for testing role change\");\nconst selectElement = await driver.findElement(By.id(`role-select-${targetRow}`));\nconst saveButton = await driver.findElement(By.id(`save-role-${targetRow}`));\nassert.ok(await selectElement.isDisplayed(), \"Role dropdown not visible\");\nassert.ok(await saveButton.isDisplayed(), \"Save button not visible\");",
              "err": {},
              "uuid": "b2dc21fd-0da2-41be-add2-d7e7c57f83a6",
              "parentUUID": "9619cdf7-f8cc-4499-b7d8-01eba13fc179",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should change a user role successfully",
              "fullTitle": "Role Assign Section UI Test (Admin User) should change a user role successfully",
              "timedOut": false,
              "duration": 2001,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// âœ… Wait for at least one user row\nconst firstRow = await driver.wait(\n  until.elementLocated(By.css(\"table tbody tr\")),\n  30000,\n  \"User row not found\"\n);\n// âœ… Locate the Select trigger (MUI renders it as a button)\nconst selectTrigger = await firstRow.findElement(By.css(\"[id^='role-select-']\"));\nawait selectTrigger.click();\n// âœ… Wait for dropdown menu and choose a role (e.g., Employee)\nconst option = await driver.wait(\n  until.elementLocated(By.xpath(\"//li[contains(., 'Employee')]\")),\n  10000,\n  \"Dropdown option not found\"\n);\nawait option.click();\n// âœ… Click save icon\nconst saveBtn = await firstRow.findElement(By.css(\"[id^='save-role-']\"));\nawait saveBtn.click();\n// âœ… Wait for Snackbar message to appear\nconst snackbar = await driver.wait(\n  until.elementLocated(By.xpath(\"//div[contains(., 'Role updated successfully!')]\")),\n  10000,\n  \"Snackbar message not found\"\n);\nconst msg = await snackbar.getText();\nassert.ok(msg.includes(\"Role updated successfully!\"), \"Role update message not shown\");",
              "err": {},
              "uuid": "87229337-a78d-44bf-8bd3-e4d35351f3db",
              "parentUUID": "9619cdf7-f8cc-4499-b7d8-01eba13fc179",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "52f21110-408d-4048-9018-305927978f21",
            "b2dc21fd-0da2-41be-add2-d7e7c57f83a6",
            "87229337-a78d-44bf-8bd3-e4d35351f3db"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 3609,
          "root": false,
          "rootEmpty": false,
          "_timeout": 80000
        },
        {
          "uuid": "58fba597-dc24-4076-a4c5-202a8f569fe4",
          "title": "Admin Users Section UI Test",
          "fullFile": "C:\\Users\\TharakaDilshan\\Downloads\\staff-management-system\\react-app\\tests\\phase1\\usersection.test.js",
          "file": "\\tests\\phase1\\usersection.test.js",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"Admin Users Section UI Test\"",
              "fullTitle": "Admin Users Section UI Test \"before all\" hook in \"Admin Users Section UI Test\"",
              "timedOut": false,
              "duration": 7176,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const options = new chrome.Options();\noptions.addArguments(\"--start-maximized\");\ndriver = await new Builder().forBrowser(\"chrome\").setChromeOptions(options).build();\nconsole.log(\"ðŸš€ Opening dashboard...\");\nawait driver.get(DASHBOARD_URL);\n// Inject valid admin token\nawait driver.executeScript(`window.localStorage.setItem('token', '${ACCESS_TOKEN}');`);\nawait driver.navigate().refresh();\n// Wait for dashboard sidebar\nawait driver.wait(until.elementLocated(By.id(\"dashboard-side-panel\")), 30000);\nconst title = await driver.findElement(By.id(\"dashboard-title\")).getText();\nassert.ok(title.includes(\"Admin Portal\"), \"Admin Portal title missing\");\nconsole.log(\"âœ… Dashboard loaded successfully as Admin\");",
              "err": {},
              "uuid": "d25224c6-3a0b-4eec-889c-933e30aa28ea",
              "parentUUID": "58fba597-dc24-4076-a4c5-202a8f569fe4",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [
            {
              "title": "\"after all\" hook in \"Admin Users Section UI Test\"",
              "fullTitle": "Admin Users Section UI Test \"after all\" hook in \"Admin Users Section UI Test\"",
              "timedOut": false,
              "duration": 502,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "if (driver) {\n  console.log(\"ðŸ§¹ Closing browser...\");\n  await driver.quit();\n}",
              "err": {},
              "uuid": "6a6494e0-a3df-4395-9074-c76eb9e85707",
              "parentUUID": "58fba597-dc24-4076-a4c5-202a8f569fe4",
              "isHook": true,
              "skipped": false
            }
          ],
          "tests": [
            {
              "title": "should navigate to Users section",
              "fullTitle": "Admin Users Section UI Test should navigate to Users section",
              "timedOut": false,
              "duration": 1034,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const usersNav = await driver.findElement(By.id(\"nav-users\"));\nawait usersNav.click();\n// Wait until user list table appears\nawait driver.wait(until.elementLocated(By.xpath(\"//h6[text()='User List']\")), 15000);\nconst header = await driver.findElement(By.xpath(\"//h6[text()='User List']\"));\nassert.ok(await header.isDisplayed(), \"User List header not visible\");\n// Verify at least one row exists\nconst firstRow = await driver.wait(\n  until.elementLocated(By.xpath(\"//table/tbody/tr\")),\n  15000,\n  \"No user rows found\"\n);\nassert.ok(await firstRow.isDisplayed(), \"No users found in the table\");\nconsole.log(\"âœ… Navigated to Users section and user table visible\");",
              "err": {},
              "uuid": "df4de866-6198-41f4-96eb-a4389b0b164b",
              "parentUUID": "58fba597-dc24-4076-a4c5-202a8f569fe4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open user details and display audit logs or 'No logs' message",
              "fullTitle": "Admin Users Section UI Test should open user details and display audit logs or 'No logs' message",
              "timedOut": false,
              "duration": 1051,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Click the first user row\nconst firstRow = await driver.findElement(By.xpath(\"//table/tbody/tr[1]\"));\nawait driver.executeScript(\"arguments[0].scrollIntoView(true);\", firstRow);\nawait firstRow.click();\n// Wait for User Details view\nawait driver.wait(\n  until.elementLocated(By.xpath(\"//h6[text()='User Details']\")),\n  20000,\n  \"User Details view not loaded\"\n);\nconst detailsHeader = await driver.findElement(By.xpath(\"//h6[text()='User Details']\"));\nassert.ok(await detailsHeader.isDisplayed(), \"User Details header not shown\");\n// Confirm essential info\nconst emailField = await driver.findElement(By.xpath(\"//p[contains(text(), 'Email:')]\"));\nassert.ok(await emailField.isDisplayed(), \"Email field not visible in details\");\nconst displayNameField = await driver.findElement(By.xpath(\"//p[contains(text(), 'Display Name:')]\"));\nassert.ok(await displayNameField.isDisplayed(), \"Display Name not visible\");\n// Verify audit logs presence (table or fallback text)\nlet auditHeader;\ntry {\n  auditHeader = await driver.wait(\n    until.elementLocated(By.xpath(\"//h6[text()='Audit Logs']\")),\n    10000\n  );\n  assert.ok(await auditHeader.isDisplayed(), \"Audit Logs table not visible\");\n  console.log(\"âœ… Audit Logs table visible for selected user\");\n} catch {\n  const noLogsMsg = await driver.findElement(\n    By.xpath(\"//p[contains(text(), 'No audit logs available')]\")\n  );\n  assert.ok(await noLogsMsg.isDisplayed(), \"Expected 'No logs' message not visible\");\n  console.log(\"â„¹ï¸ No audit logs available message shown (valid fallback)\");\n}",
              "err": {},
              "uuid": "7e76a034-9280-4d97-9687-dffb716d0f01",
              "parentUUID": "58fba597-dc24-4076-a4c5-202a8f569fe4",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should return back to Users list",
              "fullTitle": "Admin Users Section UI Test should return back to Users list",
              "timedOut": false,
              "duration": 383,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const backButton = await driver.findElement(\n  By.xpath(\"//button[contains(text(), 'Back to Users')]\")\n);\nawait backButton.click();\nawait driver.wait(until.elementLocated(By.xpath(\"//h6[text()='User List']\")), 10000);\nconst tableVisible = await driver.findElement(By.xpath(\"//h6[text()='User List']\"));\nassert.ok(await tableVisible.isDisplayed(), \"User list not visible after going back\");\nconsole.log(\"âœ… Returned to Users list successfully\");",
              "err": {},
              "uuid": "296632c4-9bd0-41f4-b442-78d4f2b10260",
              "parentUUID": "58fba597-dc24-4076-a4c5-202a8f569fe4",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "df4de866-6198-41f4-96eb-a4389b0b164b",
            "7e76a034-9280-4d97-9687-dffb716d0f01",
            "296632c4-9bd0-41f4-b442-78d4f2b10260"
          ],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 2468,
          "root": false,
          "rootEmpty": false,
          "_timeout": 90000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 60000
    }
  ],
  "meta": {
    "mocha": {
      "version": "11.7.4"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": null,
      "version": "6.3.0"
    }
  }
}